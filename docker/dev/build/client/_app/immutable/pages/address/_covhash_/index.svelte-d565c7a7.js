import{S as ne,i as oe,s as ce,x as It,a as w,l as u,r as E,y as Mt,c as L,m as _,n as m,u as $,h as c,p as v,z as Ot,b as V,K as l,f as St,t as Vt,C as qt,L as Ct,v as K,M as ie,F as he,e as Xt}from"../../../chunks/index-d5cc66c1.js";import{m as fe}from"../../../chunks/common-9379a3d9.js";import{B as de,a as gt}from"../../../chunks/page-types-6d3ebd03.js";import{G as ue}from"../../../chunks/GraphPlot-f03243f5.js";import{T as _e}from"../../../chunks/TopNav-61067f92.js";import"../../../chunks/singletons-eca981c1.js";/* empty css                                                                */import"../../../chunks/index-74e7b1a8.js";function Zt(o,t,r){const e=o.slice();return e[9]=t[r],e}function te(o,t,r){const e=o.slice();return e[12]=t[r][0],e[13]=t[r][1],e}function ee(o,t,r){const e=o.slice();return e[12]=t[r][0],e[16]=t[r][1],e}function me(o){let t,r;return t=new de({props:{breadcrumbs:[gt("Melscan","/"),gt(`Address ${o[1]}`,".")]}}),{c(){It(t.$$.fragment)},l(e){Mt(t.$$.fragment,e)},m(e,s){Ot(t,e,s),r=!0},p(e,s){const n={};s&2&&(n.breadcrumbs=[gt("Melscan","/"),gt(`Address ${e[1]}`,".")]),t.$set(n)},i(e){r||(St(t.$$.fragment,e),r=!0)},o(e){Vt(t.$$.fragment,e),r=!1},d(e){qt(t,e)}}}function le(o){let t,r=o[16].toFixed(6)+"",e,s,n,h=o[12]+"",g,f;return{c(){t=u("b"),e=E(r),s=E("\xA0"),n=u("i"),g=E(h),f=E("\xA0\xA0"),this.h()},l(a){t=_(a,"B",{class:!0});var d=m(t);e=$(d,r),d.forEach(c),s=$(a,"\xA0"),n=_(a,"I",{});var x=m(n);g=$(x,h),x.forEach(c),f=$(a,"\xA0\xA0"),this.h()},h(){v(t,"class","font-medium")},m(a,d){V(a,t,d),l(t,e),V(a,s,d),V(a,n,d),l(n,g),V(a,f,d)},p(a,d){d&1&&r!==(r=a[16].toFixed(6)+"")&&K(e,r),d&1&&h!==(h=a[12]+"")&&K(g,h)},d(a){a&&c(t),a&&c(s),a&&c(n),a&&c(f)}}}function ve(o){let t,r=o[13].toFixed(6)+"",e,s,n=o[12]+"",h,g;return{c(){t=u("span"),e=E(r),s=w(),h=E(n),g=u("br"),this.h()},l(f){t=_(f,"SPAN",{class:!0});var a=m(t);e=$(a,r),s=L(a),h=$(a,n),a.forEach(c),g=_(f,"BR",{}),this.h()},h(){v(t,"class","text-red-800")},m(f,a){V(f,t,a),l(t,e),l(t,s),l(t,h),V(f,g,a)},p(f,a){a&8&&r!==(r=f[13].toFixed(6)+"")&&K(e,r),a&8&&n!==(n=f[12]+"")&&K(h,n)},d(f){f&&c(t),f&&c(g)}}}function be(o){let t,r,e=o[13].toFixed(6)+"",s,n,h=o[12]+"",g,f;return{c(){t=u("span"),r=E("+"),s=E(e),n=w(),g=E(h),f=u("br"),this.h()},l(a){t=_(a,"SPAN",{class:!0});var d=m(t);r=$(d,"+"),s=$(d,e),n=L(d),g=$(d,h),d.forEach(c),f=_(a,"BR",{}),this.h()},h(){v(t,"class","text-green-800")},m(a,d){V(a,t,d),l(t,r),l(t,s),l(t,n),l(t,g),V(a,f,d)},p(a,d){d&8&&e!==(e=a[13].toFixed(6)+"")&&K(s,e),d&8&&h!==(h=a[12]+"")&&K(g,h)},d(a){a&&c(t),a&&c(f)}}}function ae(o){let t;function r(n,h){return n[13]>0?be:ve}let e=r(o),s=e(o);return{c(){s.c(),t=Xt()},l(n){s.l(n),t=Xt()},m(n,h){s.m(n,h),V(n,t,h)},p(n,h){e===(e=r(n))&&s?s.p(n,h):(s.d(1),s=e(n),s&&(s.c(),s.m(t.parentNode,t)))},d(n){s.d(n),n&&c(t)}}}function se(o){let t,r,e,s=o[9].height+"",n,h,g,f,a,d=o[9].txhash+"",x,D,I,M,q,O=Object.entries(o[9].deltas),k=[];for(let p=0;p<O.length;p+=1)k[p]=ae(te(o,O,p));return{c(){t=u("tr"),r=u("td"),e=u("a"),n=E(s),g=w(),f=u("td"),a=u("a"),x=E(d),I=w(),M=u("td");for(let p=0;p<k.length;p+=1)k[p].c();q=w(),this.h()},l(p){t=_(p,"TR",{class:!0});var y=m(t);r=_(y,"TD",{class:!0});var T=m(r);e=_(T,"A",{class:!0,href:!0});var R=m(e);n=$(R,s),R.forEach(c),T.forEach(c),g=L(y),f=_(y,"TD",{class:!0});var C=m(f);a=_(C,"A",{class:!0,href:!0});var j=m(a);x=$(j,d),j.forEach(c),C.forEach(c),I=L(y),M=_(y,"TD",{class:!0});var X=m(M);for(let J=0;J<k.length;J+=1)k[J].l(X);X.forEach(c),q=L(y),y.forEach(c),this.h()},h(){v(e,"class","text-blue-800 font-medium"),v(e,"href",h=`/blocks/${o[9].height}`),v(r,"class","svelte-17fuq11"),v(a,"class","text-blue-800"),v(a,"href",D=`/blocks/${o[9].height}/${o[9].txhash}`),v(f,"class","overflow-ellipsis overflow-hidden mono svelte-17fuq11"),v(M,"class","svelte-17fuq11"),v(t,"class","txn-row svelte-17fuq11")},m(p,y){V(p,t,y),l(t,r),l(r,e),l(e,n),l(t,g),l(t,f),l(f,a),l(a,x),l(t,I),l(t,M);for(let T=0;T<k.length;T+=1)k[T].m(M,null);l(t,q)},p(p,y){if(y&8&&s!==(s=p[9].height+"")&&K(n,s),y&8&&h!==(h=`/blocks/${p[9].height}`)&&v(e,"href",h),y&8&&d!==(d=p[9].txhash+"")&&K(x,d),y&8&&D!==(D=`/blocks/${p[9].height}/${p[9].txhash}`)&&v(a,"href",D),y&8){O=Object.entries(p[9].deltas);let T;for(T=0;T<O.length;T+=1){const R=te(p,O,T);k[T]?k[T].p(R,y):(k[T]=ae(R),k[T].c(),k[T].m(M,null))}for(;T<k.length;T+=1)k[T].d(1);k.length=O.length}},d(p){p&&c(t),Ct(k,p)}}}function re(o){let t,r,e,s;return{c(){t=u("button"),r=E("Load more"),this.h()},l(n){t=_(n,"BUTTON",{class:!0});var h=m(t);r=$(h,"Load more"),h.forEach(c),this.h()},h(){v(t,"class","text-blue-800")},m(n,h){V(n,t,h),l(t,r),e||(s=ie(t,"click",o[8]),e=!0)},p:he,d(n){n&&c(t),e=!1,s()}}}function pe(o){let t,r,e,s,n,h,g,f,a,d,x,D,I,M,q,O,k,p,y,T,R,C,j,X,J,Z,Et,P,tt,$t,Tt,et,Q,Dt,U,lt,kt,yt,G,Y,N,at,Bt,wt,it,Lt,xt,st,At,Ht,rt,Ft,ft;t=new _e({props:{$$slots:{default:[me]},$$scope:{ctx:o}}});let nt=Object.entries(o[0].balances),A=[];for(let i=0;i<nt.length;i+=1)A[i]=le(ee(o,nt,i));Q=new ue({props:{stepped:!0,unit:"MEL",fetchData:o[7]}});let ot=o[3],H=[];for(let i=0;i<ot.length;i+=1)H[i]=se(Zt(o,ot,i));let F=o[3].length!=o[0].transactions.length&&re(o);return{c(){It(t.$$.fragment),r=w(),e=u("div"),s=u("div"),n=u("h3"),h=E("Summary"),g=w(),f=u("div"),a=u("table"),d=u("tbody"),x=u("tr"),D=u("td"),I=E("First seen"),M=w(),q=u("td"),O=u("a"),k=E(o[4]),p=E(`
							(`),y=E(o[5]),T=E(")"),R=w(),C=u("tr"),j=u("td"),X=E("Total balance"),J=w(),Z=u("td");for(let i=0;i<A.length;i+=1)A[i].c();Et=w(),P=u("div"),tt=u("h3"),$t=E("Balance history (MEL)"),Tt=w(),et=u("div"),It(Q.$$.fragment),Dt=w(),U=u("div"),lt=u("h3"),kt=E("Transaction history"),yt=w(),G=u("div"),Y=u("table"),N=u("thead"),at=u("td"),Bt=E("Height"),wt=w(),it=u("td"),Lt=E("Hash"),xt=w(),st=u("td"),At=E("Balance change"),Ht=w(),rt=u("tbody");for(let i=0;i<H.length;i+=1)H[i].c();Ft=w(),F&&F.c(),this.h()},l(i){Mt(t.$$.fragment,i),r=L(i),e=_(i,"DIV",{class:!0});var B=m(e);s=_(B,"DIV",{class:!0});var S=m(s);n=_(S,"H3",{class:!0});var b=m(n);h=$(b,"Summary"),b.forEach(c),S.forEach(c),g=L(B),f=_(B,"DIV",{class:!0});var z=m(f);a=_(z,"TABLE",{class:!0});var Nt=m(a);d=_(Nt,"TBODY",{});var dt=m(d);x=_(dt,"TR",{});var ut=m(x);D=_(ut,"TD",{class:!0});var Rt=m(D);I=$(Rt,"First seen"),Rt.forEach(c),M=L(ut),q=_(ut,"TD",{});var ht=m(q);O=_(ht,"A",{class:!0,href:!0});var jt=m(O);k=$(jt,o[4]),jt.forEach(c),p=$(ht,`
							(`),y=$(ht,o[5]),T=$(ht,")"),ht.forEach(c),ut.forEach(c),R=L(dt),C=_(dt,"TR",{});var _t=m(C);j=_(_t,"TD",{class:!0});var Gt=m(j);X=$(Gt,"Total balance"),Gt.forEach(c),J=L(_t),Z=_(_t,"TD",{});var Pt=m(Z);for(let W=0;W<A.length;W+=1)A[W].l(Pt);Pt.forEach(c),_t.forEach(c),dt.forEach(c),Nt.forEach(c),z.forEach(c),Et=L(B),P=_(B,"DIV",{class:!0});var mt=m(P);tt=_(mt,"H3",{class:!0});var Ut=m(tt);$t=$(Ut,"Balance history (MEL)"),Ut.forEach(c),Tt=L(mt),et=_(mt,"DIV",{class:!0});var Yt=m(et);Mt(Q.$$.fragment,Yt),Yt.forEach(c),mt.forEach(c),Dt=L(B),U=_(B,"DIV",{class:!0});var vt=m(U);lt=_(vt,"H3",{class:!0});var zt=m(lt);kt=$(zt,"Transaction history"),zt.forEach(c),yt=L(vt),G=_(vt,"DIV",{class:!0});var bt=m(G);Y=_(bt,"TABLE",{class:!0});var pt=m(Y);N=_(pt,"THEAD",{class:!0});var ct=m(N);at=_(ct,"TD",{class:!0});var Kt=m(at);Bt=$(Kt,"Height"),Kt.forEach(c),wt=L(ct),it=_(ct,"TD",{});var Jt=m(it);Lt=$(Jt,"Hash"),Jt.forEach(c),xt=L(ct),st=_(ct,"TD",{class:!0});var Qt=m(st);At=$(Qt,"Balance change"),Qt.forEach(c),ct.forEach(c),Ht=L(pt),rt=_(pt,"TBODY",{});var Wt=m(rt);for(let W=0;W<H.length;W+=1)H[W].l(Wt);Wt.forEach(c),pt.forEach(c),Ft=L(bt),F&&F.l(bt),bt.forEach(c),vt.forEach(c),B.forEach(c),this.h()},h(){v(n,"class","text-2xl font-bold"),v(s,"class","mb-3 mt-8"),v(D,"class","text-black text-opacity-50 font-bold w-1/2"),v(O,"class","text-blue-800 font-medium"),v(O,"href",`/blocks/${o[4]}`),v(j,"class","text-black text-opacity-50 font-bold w-1/2"),v(a,"class","table-fixed w-full text-sm text-left"),v(f,"class","m-3"),v(tt,"class","text-2xl font-bold"),v(et,"class","m-3"),v(P,"class","mb-3 mt-8"),v(lt,"class","text-2xl font-bold"),v(at,"class","w-24"),v(st,"class","w-32"),v(N,"class","text-black text-opacity-50 font-bold"),v(Y,"class","table-fixed w-full text-sm text-left"),v(G,"class","m-3"),v(U,"class","mb-3 mt-8"),v(e,"class","container mx-auto max-w-screen-lg")},m(i,B){Ot(t,i,B),V(i,r,B),V(i,e,B),l(e,s),l(s,n),l(n,h),l(e,g),l(e,f),l(f,a),l(a,d),l(d,x),l(x,D),l(D,I),l(x,M),l(x,q),l(q,O),l(O,k),l(q,p),l(q,y),l(q,T),l(d,R),l(d,C),l(C,j),l(j,X),l(C,J),l(C,Z);for(let S=0;S<A.length;S+=1)A[S].m(Z,null);l(e,Et),l(e,P),l(P,tt),l(tt,$t),l(P,Tt),l(P,et),Ot(Q,et,null),l(e,Dt),l(e,U),l(U,lt),l(lt,kt),l(U,yt),l(U,G),l(G,Y),l(Y,N),l(N,at),l(at,Bt),l(N,wt),l(N,it),l(it,Lt),l(N,xt),l(N,st),l(st,At),l(Y,Ht),l(Y,rt);for(let S=0;S<H.length;S+=1)H[S].m(rt,null);l(G,Ft),F&&F.m(G,null),ft=!0},p(i,[B]){const S={};if(B&524290&&(S.$$scope={dirty:B,ctx:i}),t.$set(S),B&1){nt=Object.entries(i[0].balances);let b;for(b=0;b<nt.length;b+=1){const z=ee(i,nt,b);A[b]?A[b].p(z,B):(A[b]=le(z),A[b].c(),A[b].m(Z,null))}for(;b<A.length;b+=1)A[b].d(1);A.length=nt.length}if(B&8){ot=i[3];let b;for(b=0;b<ot.length;b+=1){const z=Zt(i,ot,b);H[b]?H[b].p(z,B):(H[b]=se(z),H[b].c(),H[b].m(rt,null))}for(;b<H.length;b+=1)H[b].d(1);H.length=ot.length}i[3].length!=i[0].transactions.length?F?F.p(i,B):(F=re(i),F.c(),F.m(G,null)):F&&(F.d(1),F=null)},i(i){ft||(St(t.$$.fragment,i),St(Q.$$.fragment,i),ft=!0)},o(i){Vt(t.$$.fragment,i),Vt(Q.$$.fragment,i),ft=!1},d(i){qt(t,i),i&&c(r),i&&c(e),Ct(A,i),qt(Q),Ct(H,i),F&&F.d()}}}let Le=async o=>{let{covhash:t}=o.params,r=`/raw/address/${t}`,e=await fe(o.fetch,r);return e.transactions=e.transactions.map(s=>(s.date=new Date(s.date),s)),{status:200,props:{summary:e,covhash:t}}};function ge(o,t,r){let e,{summary:s}=t,{covhash:n}=t,h=s.transactions.length>0?s.transactions[0].height:0,g=s.transactions.length>0?s.transactions[0].date.toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"}):"",f=(()=>{let D=0;return s.transactions.map(I=>("MEL"in I.deltas&&(D+=I.deltas.MEL),{height:I.height,date:I.date,value:D}))})(),a=50;const d=async(D,I)=>f.filter(M=>(!D||M.date>=D)&&(!I||M.date<=I)),x=()=>r(2,a+=50);return o.$$set=D=>{"summary"in D&&r(0,s=D.summary),"covhash"in D&&r(1,n=D.covhash)},o.$$.update=()=>{o.$$.dirty&5&&r(3,e=s.transactions.slice().reverse().slice(0,a))},[s,n,a,e,h,g,f,d,x]}class xe extends ne{constructor(t){super(),oe(this,t,ge,pe,ce,{summary:0,covhash:1})}}export{xe as default,Le as load};
