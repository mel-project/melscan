import{S as So,i as _o,s as yo,l as bo,m as vo,n as ko,h as Si,p as _i,q as yi,O as bi,b as Mo,F as vi,P as Do,o as To,Q as xo}from"./index-d5cc66c1.js";import"./common-9379a3d9.js";import{w as Eo}from"./index-74e7b1a8.js";const Ao=!0,Se="u-",Lo="uplot",Po=Se+"hz",Ro=Se+"vt",Co=Se+"title",zo=Se+"wrap",Fo=Se+"under",Vo=Se+"over",No=Se+"axis",Tt=Se+"off",Ho=Se+"select",Oo=Se+"cursor-x",Go=Se+"cursor-y",Wo=Se+"cursor-pt",Io=Se+"legend",Bo=Se+"live",Uo=Se+"inline",Ko=Se+"thead",Yo=Se+"series",jo=Se+"marker",ki=Se+"label",qo=Se+"value",pl="width",ml="height",al="top",Mi="bottom",It="left",yn="right",Cn="#000",Di=Cn+"0",Ti="mousemove",xi="mousedown",bn="mouseup",Ei="mouseenter",Ai="mouseleave",Li="dblclick",Jo="resize",Zo="scroll",Pi="change",Ol="dppxchange",qt=typeof window<"u",xn=qt?document:null,Kt=qt?window:null,Qo=qt?navigator:null;let te,Fl;function En(){let e=devicePixelRatio;te!=e&&(te=e,Fl&&Ln(Pi,Fl,En),Fl=matchMedia(`(min-resolution: ${te-.001}dppx) and (max-resolution: ${te+.001}dppx)`),Et(Pi,Fl,En),Kt.dispatchEvent(new CustomEvent(Ol)))}function je(e,l){if(l!=null){let s=e.classList;!s.contains(l)&&s.add(l)}}function An(e,l){let s=e.classList;s.contains(l)&&s.remove(l)}function ce(e,l,s){e.style[l]=s+"px"}function ct(e,l,s,n){let o=xn.createElement(e);return l!=null&&je(o,l),s!=null&&s.insertBefore(o,n),o}function et(e,l){return ct("div",e,l)}const Ri=new WeakMap;function Bt(e,l,s,n,o){let a="translate("+l+"px,"+s+"px)",u=Ri.get(e);a!=u&&(e.style.transform=a,Ri.set(e,a),l<0||s<0||l>n||s>o?je(e,Tt):An(e,Tt))}const Ci=new WeakMap;function Xo(e,l,s){let n=l+s,o=Ci.get(e);n!=o&&(Ci.set(e,n),e.style.background=l,e.style.borderColor=s)}const zi=new WeakMap;function $o(e,l,s,n){let o=l+""+s,a=zi.get(e);o!=a&&(zi.set(e,o),e.style.height=s+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-s/2+"px":0)}const zn={passive:!0},rs={...zn,capture:!0};function Et(e,l,s,n){l.addEventListener(e,s,n?rs:zn)}function Ln(e,l,s,n){l.removeEventListener(e,s,n?rs:zn)}qt&&En();function _t(e,l,s,n){let o;s=s||0,n=n||l.length-1;let a=n<=2147483647;for(;n-s>1;)o=a?s+n>>1:qe((s+n)/2),l[o]<e?s=o:n=o;return e-l[s]<=l[n]-e?s:n}function Yt(e,l,s,n){for(let o=n==1?l:s;o>=l&&o<=s;o+=n)if(e[o]!=null)return o;return-1}function er(e,l,s,n){let o=X,a=-X;if(n==1)o=e[l],a=e[s];else if(n==-1)o=e[s],a=e[l];else for(let u=l;u<=s;u++)e[u]!=null&&(o=Ue(o,e[u]),a=Pe(a,e[u]));return[o,a]}function tr(e,l,s){let n=X,o=-X;for(let a=l;a<=s;a++)e[a]>0&&(n=Ue(n,e[a]),o=Pe(o,e[a]));return[n==X?1:n,o==-X?10:o]}const vn=[0,0];function Fi(e,l,s,n){return vn[0]=s<0?re(e,-s):e,vn[1]=n<0?re(l,-n):l,vn}function Bl(e,l,s,n){let o=sr(e),a=s==10?At:fs;e==l&&(o==-1?(e*=s,l/=s):(e/=s,l*=s));let u,g,m;return n?(u=qe(a(e)),g=Hn(a(l)),m=Fi(yt(s,u),yt(s,g),u,g),e=m[0],l=m[1]):(u=qe(a(Be(e))),g=qe(a(Be(l))),m=Fi(yt(s,u),yt(s,g),u,g),e=cs(e,m[0]),l=Lt(l,m[1])),[e,l]}function Fn(e,l,s,n){let o=Bl(e,l,s,n);return e==0&&(o[0]=0),l==0&&(o[1]=0),o}const Vn=.1,Vi={mode:3,pad:Vn},dl={pad:0,soft:null,mode:0},lr={min:dl,max:dl};function Gl(e,l,s,n){return Kl(s)?Ni(e,l,s):(dl.pad=s,dl.soft=n?0:null,dl.mode=n?3:0,Ni(e,l,lr))}function le(e,l){return e==null?l:e}function nr(e,l,s){for(l=le(l,0),s=le(s,e.length-1);l<=s;){if(e[l]!=null)return!0;l++}return!1}function Ni(e,l,s){let n=s.min,o=s.max,a=le(n.pad,0),u=le(o.pad,0),g=le(n.hard,-X),m=le(o.hard,X),d=le(n.soft,X),y=le(o.soft,-X),b=le(n.mode,0),h=le(o.mode,0),R=l-e;R<1e-9&&(R=0,(e==0||l==0)&&(R=1e-9,b==2&&d!=X&&(a=0),h==2&&y!=-X&&(u=0)));let z=R||Be(l)||1e3,A=At(z),N=yt(10,qe(A)),j=z*(R==0?e==0?.1:1:a),k=re(cs(e-j,N/10),9),S=e>=d&&(b==1||b==3&&k<=d||b==2&&k>=d)?d:X,L=Pe(g,k<S&&e>=S?S:Ue(S,k)),x=z*(R==0?l==0?.1:1:u),F=re(Lt(l+x,N/10),9),T=l<=y&&(h==1||h==3&&F>=y||h==2&&F<=y)?y:-X,O=Ue(m,F>T&&l<=T?T:Pe(T,F));return L==O&&L==0&&(O=100),[L,O]}const ir=new Intl.NumberFormat(qt?Qo.language:"en-US"),Nn=e=>ir.format(e),Je=Math,Hl=Je.PI,Be=Je.abs,qe=Je.floor,Me=Je.round,Hn=Je.ceil,Ue=Je.min,Pe=Je.max,yt=Je.pow,sr=Je.sign,At=Je.log10,fs=Je.log2,or=(e,l=1)=>Je.sinh(e)*l,kn=(e,l=1)=>Je.asinh(e/l),X=1/0;function Hi(e){return(At((e^e>>31)-(e>>31))|0)+1}function Dt(e,l){return Me(e/l)*l}function Oi(e,l,s){return Ue(Pe(e,l),s)}function ee(e){return typeof e=="function"?e:()=>e}const rr=e=>e,us=(e,l)=>l,fr=e=>null,Gi=e=>!0,Wi=(e,l)=>e==l;function Lt(e,l){return Hn(e/l)*l}function cs(e,l){return qe(e/l)*l}function re(e,l){return Me(e*(l=10**l))/l}const Ul=new Map;function ur(e){return((""+e).split(".")[1]||"").length}function Sl(e,l,s,n){let o=[],a=n.map(ur);for(let u=l;u<s;u++){let g=Be(u),m=re(yt(e,u),g);for(let d=0;d<n.length;d++){let y=n[d]*m,b=(y>=0&&u>=0?0:g)+(u>=a[d]?0:a[d]),h=re(y,b);o.push(h),Ul.set(h,b)}}return o}const wl={},as=[],jt=[null,null],xt=Array.isArray;function Ii(e){return typeof e=="string"}function Kl(e){let l=!1;if(e!=null){let s=e.constructor;l=s==null||s==Object}return l}function Bi(e){return e!=null&&typeof e=="object"}const cr=Object.getPrototypeOf(Uint8Array);function Pt(e,l=Kl){let s;if(xt(e)){let n=e.find(o=>o!=null);if(xt(n)||l(n)){s=Array(e.length);for(let o=0;o<e.length;o++)s[o]=Pt(e[o],l)}else s=e.slice()}else if(e instanceof cr)s=e.slice();else if(l(e)){s={};for(let n in e)s[n]=Pt(e[n],l)}else s=e;return s}function we(e){let l=arguments;for(let s=1;s<l.length;s++){let n=l[s];for(let o in n)Kl(e[o])?we(e[o],Pt(n[o])):e[o]=Pt(n[o])}return e}const ar=0,hr=1,pr=2;function mr(e,l,s){for(let n=0,o,a=-1;n<l.length;n++){let u=l[n];if(u>a){for(o=u-1;o>=0&&e[o]==null;)e[o--]=null;for(o=u+1;o<s&&e[o]==null;)e[a=o++]=null}}}function gr(e,l){let s=new Set;for(let u=0;u<e.length;u++){let m=e[u][0],d=m.length;for(let y=0;y<d;y++)s.add(m[y])}let n=[Array.from(s).sort((u,g)=>u-g)],o=n[0].length,a=new Map;for(let u=0;u<o;u++)a.set(n[0][u],u);for(let u=0;u<e.length;u++){let g=e[u],m=g[0];for(let d=1;d<g.length;d++){let y=g[d],b=Array(o).fill(void 0),h=l?l[u][d]:hr,R=[];for(let z=0;z<y.length;z++){let A=y[z],N=a.get(m[z]);A===null?h!=ar&&(b[N]=A,h==pr&&R.push(N)):b[N]=A}mr(b,R,o),n.push(b)}}return n}const dr=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask,hs=["January","February","March","April","May","June","July","August","September","October","November","December"],ps=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function ms(e){return e.slice(0,3)}const wr=ps.map(ms),Sr=hs.map(ms),_r={MMMM:hs,MMM:Sr,WWWW:ps,WWW:wr};function hl(e){return(e<10?"0":"")+e}function yr(e){return(e<10?"00":e<100?"0":"")+e}const br={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>hl(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>hl(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>hl(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>hl(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>hl(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>yr(e.getMilliseconds())};function On(e,l){l=l||_r;let s=[],n=/\{([a-z]+)\}|[^{]+/gi,o;for(;o=n.exec(e);)s.push(o[0][0]=="{"?br[o[1]]:o[0]);return a=>{let u="";for(let g=0;g<s.length;g++)u+=typeof s[g]=="string"?s[g]:s[g](a,l);return u}}const vr=new Intl.DateTimeFormat().resolvedOptions().timeZone;function kr(e,l){let s;return l=="UTC"||l=="Etc/UTC"?s=new Date(+e+e.getTimezoneOffset()*6e4):l==vr?s=e:(s=new Date(e.toLocaleString("en-US",{timeZone:l})),s.setMilliseconds(e.getMilliseconds())),s}const gs=e=>e%1==0,Wl=[1,2,2.5,5],Mr=Sl(10,-16,0,Wl),ds=Sl(10,0,16,Wl),Dr=ds.filter(gs),Tr=Mr.concat(ds),Gn=`
`,ws="{YYYY}",Ui=Gn+ws,Ss="{M}/{D}",gl=Gn+Ss,Vl=gl+"/{YY}",_s="{aa}",xr="{h}:{mm}",Ut=xr+_s,Ki=Gn+Ut,Yi=":{ss}",se=null;function ys(e){let l=e*1e3,s=l*60,n=s*60,o=n*24,a=o*30,u=o*365,m=(e==1?Sl(10,0,3,Wl).filter(gs):Sl(10,-3,0,Wl)).concat([l,l*5,l*10,l*15,l*30,s,s*5,s*10,s*15,s*30,n,n*2,n*3,n*4,n*6,n*8,n*12,o,o*2,o*3,o*4,o*5,o*6,o*7,o*8,o*9,o*10,o*15,a,a*2,a*3,a*4,a*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const d=[[u,ws,se,se,se,se,se,se,1],[o*28,"{MMM}",Ui,se,se,se,se,se,1],[o,Ss,Ui,se,se,se,se,se,1],[n,"{h}"+_s,Vl,se,gl,se,se,se,1],[s,Ut,Vl,se,gl,se,se,se,1],[l,Yi,Vl+" "+Ut,se,gl+" "+Ut,se,Ki,se,1],[e,Yi+".{fff}",Vl+" "+Ut,se,gl+" "+Ut,se,Ki,se,1]];function y(b){return(h,R,z,A,N,j)=>{let k=[],S=N>=u,L=N>=a&&N<u,x=b(z),F=re(x*e,3),T=Mn(x.getFullYear(),S?0:x.getMonth(),L||S?1:x.getDate()),O=re(T*e,3);if(L||S){let E=L?N/a:0,H=S?N/u:0,D=F==O?F:re(Mn(T.getFullYear()+H,T.getMonth()+E,1)*e,3),U=new Date(Me(D/e)),oe=U.getFullYear(),Q=U.getMonth();for(let V=0;D<=A;V++){let $=Mn(oe+H*V,Q+E*V,1),G=$-b(re($*e,3));D=re((+$+G)*e,3),D<=A&&k.push(D)}}else{let E=N>=o?o:N,H=qe(z)-qe(F),D=O+H+Lt(F-O,E);k.push(D);let U=b(D),oe=U.getHours()+U.getMinutes()/s+U.getSeconds()/n,Q=N/n,V=h.axes[R]._space,$=j/V;for(;D=re(D+N,e==1?0:3),!(D>A);)if(Q>1){let G=qe(re(oe+Q,6))%24,Ve=b(D).getHours()-G;Ve>1&&(Ve=-1),D-=Ve*n,oe=(oe+Q)%24;let W=k[k.length-1];re((D-W)/N,3)*$>=.7&&k.push(D)}else k.push(D)}return k}}return[m,d,y]}const[Er,Ar,Lr]=ys(1),[Pr,Rr,Cr]=ys(.001);Sl(2,-53,53,[1]);function ji(e,l){return e.map(s=>s.map((n,o)=>o==0||o==8||n==null?n:l(o==1||s[8]==0?n:s[1]+n)))}function qi(e,l){return(s,n,o,a,u)=>{let g=l.find(z=>u>=z[0])||l[l.length-1],m,d,y,b,h,R;return n.map(z=>{let A=e(z),N=A.getFullYear(),j=A.getMonth(),k=A.getDate(),S=A.getHours(),L=A.getMinutes(),x=A.getSeconds(),F=N!=m&&g[2]||j!=d&&g[3]||k!=y&&g[4]||S!=b&&g[5]||L!=h&&g[6]||x!=R&&g[7]||g[1];return m=N,d=j,y=k,b=S,h=L,R=x,F(A)})}}function zr(e,l){let s=On(l);return(n,o,a,u,g)=>o.map(m=>s(e(m)))}function Mn(e,l,s){return new Date(e,l,s)}function Ji(e,l){return l(e)}const Fr="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Zi(e,l){return(s,n)=>l(e(n))}function Vr(e,l){let s=e.series[l];return s.width?s.stroke(e,l):s.points.width?s.points.stroke(e,l):null}function Nr(e,l){return e.series[l].fill(e,l)}const Hr={show:!0,live:!0,isolate:!1,markers:{show:!0,width:2,stroke:Vr,fill:Nr,dash:"solid"},idx:null,idxs:null,values:[]};function Or(e,l){let s=e.cursor.points,n=et(),o=s.size(e,l);ce(n,pl,o),ce(n,ml,o);let a=o/-2;ce(n,"marginLeft",a),ce(n,"marginTop",a);let u=s.width(e,l,o);return u&&ce(n,"borderWidth",u),n}function Gr(e,l){let s=e.series[l].points;return s._fill||s._stroke}function Wr(e,l){let s=e.series[l].points;return s._stroke||s._fill}function Ir(e,l){let s=e.series[l].points;return Ds(s.width,1)}function Br(e,l,s){return s}const Dn=[0,0];function Ur(e,l,s){return Dn[0]=l,Dn[1]=s,Dn}function Nl(e,l,s){return n=>{n.button==0&&s(n)}}function Tn(e,l,s){return s}const Kr={show:!0,x:!0,y:!0,lock:!1,move:Ur,points:{show:Or,size:Ir,width:0,stroke:Wr,fill:Gr},bind:{mousedown:Nl,mouseup:Nl,click:Nl,dblclick:Nl,mousemove:Tn,mouseleave:Tn,mouseenter:Tn},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,_x:!1,_y:!1},focus:{prox:-1},left:-10,top:-10,idx:null,dataIdx:Br,idxs:null},bs={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Wn=we({},bs,{filter:us}),vs=we({},Wn,{size:10}),ks=we({},bs,{show:!1}),In='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ms="bold "+In,Yr=1.5,Qi={show:!0,scale:"x",stroke:Cn,space:50,gap:5,size:50,labelGap:0,labelSize:30,labelFont:Ms,side:2,grid:Wn,ticks:vs,border:ks,font:In,rotate:0},jr="Value",qr="Time",Xi={show:!0,scale:"x",auto:!1,sorted:1,min:X,max:-X,idxs:[]};function Jr(e,l,s,n,o){return l.map(a=>a==null?"":Nn(a))}function Zr(e,l,s,n,o,a,u){let g=[],m=Ul.get(o)||0;s=u?s:re(Lt(s,o),m);for(let d=s;d<=n;d=re(d+o,m))g.push(Object.is(d,-0)?0:d);return g}function Pn(e,l,s,n,o,a,u){const g=[],m=e.scales[e.axes[l].scale].log,d=m==10?At:fs,y=qe(d(s));o=yt(m,y),y<0&&(o=re(o,-y));let b=s;do g.push(b),b=re(b+o,Ul.get(o)),b>=o*m&&(o=b);while(b<=n);return g}function Qr(e,l,s,n,o,a,u){let m=e.scales[e.axes[l].scale].asinh,d=n>m?Pn(e,l,Pe(m,s),n,o):[m],y=n>=0&&s<=0?[0]:[];return(s<-m?Pn(e,l,Pe(m,-n),-s,o):[m]).reverse().map(h=>-h).concat(y,d)}const Xr=/./,$r=/[12357]/,ef=/[125]/,tf=/1/;function lf(e,l,s,n,o){let a=e.axes[s],u=a.scale,g=e.scales[u];if(g.distr==3&&g.log==2)return l;let m=e.valToPos,d=a._space,y=m(10,u),b=m(9,u)-y>=d?Xr:m(7,u)-y>=d?$r:m(5,u)-y>=d?ef:tf;return l.map(h=>g.distr==4&&h==0||b.test(h)?h:null)}function nf(e,l){return l==null?"":Nn(l)}const $i={show:!0,scale:"y",stroke:Cn,space:30,gap:5,size:50,labelGap:0,labelSize:30,labelFont:Ms,side:3,grid:Wn,ticks:vs,border:ks,font:In,rotate:0};function Ds(e,l){let s=3+(e||1)*2;return re(s*l,3)}function sf(e,l){let{scale:s,idxs:n}=e.series[0],o=e._data[0],a=e.valToPos(o[n[0]],s,!0),u=e.valToPos(o[n[1]],s,!0),g=Be(u-a),m=e.series[l],d=g/(m.points.space*te);return n[1]-n[0]<=d}const es={scale:null,auto:!0,sorted:0,min:X,max:-X},of={show:!0,auto:!0,sorted:0,alpha:1,facets:[we({},es,{scale:"x"}),we({},es,{scale:"y"})]},ts={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:(e,l,s,n,o)=>o,alpha:1,points:{show:sf,filter:null},values:null,min:X,max:-X,idxs:[],path:null,clip:null};function rf(e,l,s,n,o){return s/10}const Ts={time:Ao,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},ff=we({},Ts,{time:!1,ori:1}),ls={};function xs(e,l){let s=ls[e];return s||(s={key:e,plots:[],sub(n){s.plots.push(n)},unsub(n){s.plots=s.plots.filter(o=>o!=n)},pub(n,o,a,u,g,m,d){for(let y=0;y<s.plots.length;y++)s.plots[y]!=o&&s.plots[y].pub(n,o,a,u,g,m,d)}},e!=null&&(ls[e]=s)),s}const Rt=1<<0,Il=1<<1;function Ct(e,l,s){const n=e.series[l],o=e.scales,a=e.bbox,u=e.mode==2?o[n.facets[0].scale]:o[e.series[0].scale];let g=e._data[0],m=e._data[l],d=u,y=e.mode==2?o[n.facets[1].scale]:o[n.scale],b=a.left,h=a.top,R=a.width,z=a.height,A=e.valToPosH,N=e.valToPosV;return d.ori==0?s(n,g,m,d,y,A,N,b,h,R,z,ql,Jt,Zl,As,Ps):s(n,g,m,d,y,N,A,h,b,z,R,Jl,Zt,Un,Ls,Rs)}function Yl(e,l){let s=0,n=0,o=le(e.bands,as);for(let a=0;a<o.length;a++){let u=o[a];u.series[0]==l?s=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[s,n==1?-1:n==2?1:n==3?2:0]}function uf(e,l,s,n,o){let a=e.scales[e.series[l].scale];return o==-1?a.min:o==1?a.max:a.distr==3?a.dir==1?a.min:a.max:0}function at(e,l,s,n,o,a){return Ct(e,l,(u,g,m,d,y,b,h,R,z,A,N)=>{let j=u.pxRound;const k=d.dir*(d.ori==0?1:-1),S=d.ori==0?Jt:Zt;let L,x;k==1?(L=s,x=n):(L=n,x=s);let F=j(b(g[L],d,A,R)),T=j(h(m[L],y,N,z)),O=j(b(g[x],d,A,R)),E=j(h(a==1?y.max:y.min,y,N,z)),H=new Path2D(o);return S(H,O,E),S(H,F,E),S(H,F,T),H})}function jl(e,l,s,n,o,a){let u=null;if(e.length>0){u=new Path2D;const g=l==0?Zl:Un;let m=s;for(let y=0;y<e.length;y++){let b=e[y];if(b[1]>b[0]){let h=b[0]-m;h>0&&g(u,m,n,h,n+a),m=b[1]}}let d=s+o-m;d>0&&g(u,m,n,d,n+a)}return u}function cf(e,l,s){let n=e[e.length-1];n&&n[0]==l?n[1]=s:e.push([l,s])}function Bn(e,l,s,n,o,a,u){let g=[];for(let m=o==1?s:n;m>=s&&m<=n;m+=o)if(l[m]===null){let y=m,b=m;if(o==1)for(;++m<=n&&l[m]===null;)b=m;else for(;--m>=s&&l[m]===null;)b=m;let h=a(e[y]),R=b==y?h:a(e[b]);h=u<=0?a(e[y-o]):h,R=u>=0?a(e[b+o]):R,R>=h&&g.push([h,R])}return g}function ns(e){return e==0?rr:e==1?Me:l=>Dt(l,e)}function Es(e){let l=e==0?ql:Jl,s=e==0?(o,a,u,g,m,d)=>{o.arcTo(a,u,g,m,d)}:(o,a,u,g,m,d)=>{o.arcTo(u,a,m,g,d)},n=e==0?(o,a,u,g,m)=>{o.rect(a,u,g,m)}:(o,a,u,g,m)=>{o.rect(u,a,m,g)};return(o,a,u,g,m,d=0)=>{d==0?n(o,a,u,g,m):(d=Ue(d,g/2,m/2),l(o,a+d,u),s(o,a+g,u,a+g,u+m,d),s(o,a+g,u+m,a,u+m,d),s(o,a,u+m,a,u,d),s(o,a,u,a+g,u,d),o.closePath())}}const ql=(e,l,s)=>{e.moveTo(l,s)},Jl=(e,l,s)=>{e.moveTo(s,l)},Jt=(e,l,s)=>{e.lineTo(l,s)},Zt=(e,l,s)=>{e.lineTo(s,l)},Zl=Es(0),Un=Es(1),As=(e,l,s,n,o,a)=>{e.arc(l,s,n,o,a)},Ls=(e,l,s,n,o,a)=>{e.arc(s,l,n,o,a)},Ps=(e,l,s,n,o,a,u)=>{e.bezierCurveTo(l,s,n,o,a,u)},Rs=(e,l,s,n,o,a,u)=>{e.bezierCurveTo(s,l,o,n,u,a)};function Cs(e){return(l,s,n,o,a)=>Ct(l,s,(u,g,m,d,y,b,h,R,z,A,N)=>{let{pxRound:j,points:k}=u,S,L;d.ori==0?(S=ql,L=As):(S=Jl,L=Ls);const x=re(k.width*te,3);let F=(k.size-k.width)/2*te,T=re(F*2,3),O=new Path2D,E=new Path2D,{left:H,top:D,width:U,height:oe}=l.bbox;Zl(E,H-T,D-T,U+T*2,oe+T*2);const Q=V=>{if(m[V]!=null){let $=j(b(g[V],d,A,R)),G=j(h(m[V],y,N,z));S(O,$+F,G),L(O,$,G,F,0,Hl*2)}};if(a)a.forEach(Q);else for(let V=n;V<=o;V++)Q(V);return{stroke:x>0?O:null,fill:O,clip:E,flags:Rt|Il}})}function zs(e){return(l,s,n,o,a,u)=>{n!=o&&(a!=n&&u!=n&&e(l,s,n),a!=o&&u!=o&&e(l,s,o),e(l,s,u))}}const af=zs(Jt),hf=zs(Zt);function Fs(e){const l=le(e==null?void 0:e.alignGaps,0);return(s,n,o,a)=>Ct(s,n,(u,g,m,d,y,b,h,R,z,A,N)=>{let j=u.pxRound,k=W=>j(b(W,d,A,R)),S=W=>j(h(W,y,N,z)),L,x;d.ori==0?(L=Jt,x=af):(L=Zt,x=hf);const F=d.dir*(d.ori==0?1:-1),T={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Rt},O=T.stroke;let E=X,H=-X,D,U,oe,Q=k(g[F==1?o:a]),V=Yt(m,o,a,1*F),$=Yt(m,o,a,-1*F),G=k(g[V]),Ce=k(g[$]);for(let W=F==1?o:a;W>=o&&W<=a;W+=F){let I=k(g[W]);I==Q?m[W]!=null&&(U=S(m[W]),E==X&&(L(O,I,U),D=U),E=Ue(U,E),H=Pe(U,H)):(E!=X&&(x(O,Q,E,H,D,U),oe=Q),m[W]!=null?(U=S(m[W]),L(O,I,U),E=H=D=U):(E=X,H=-X),Q=I)}E!=X&&E!=H&&oe!=Q&&x(O,Q,E,H,D,U);let[De,Ve]=Yl(s,n);if(u.fill!=null||De!=0){let W=T.fill=new Path2D(O),I=u.fillTo(s,n,u.min,u.max,De),Te=S(I);L(W,Ce,Te),L(W,G,Te)}if(!u.spanGaps){let W=[];W.push(...Bn(g,m,o,a,F,k,l)),T.gaps=W=u.gaps(s,n,o,a,W),T.clip=jl(W,d.ori,R,z,A,N)}return Ve!=0&&(T.band=Ve==2?[at(s,n,o,a,O,-1),at(s,n,o,a,O,1)]:at(s,n,o,a,O,Ve)),T})}function pf(e){const l=le(e.align,1),s=le(e.ascDesc,!1),n=le(e.alignGaps,0);return(o,a,u,g)=>Ct(o,a,(m,d,y,b,h,R,z,A,N,j,k)=>{let S=m.pxRound,L=V=>S(R(V,b,j,A)),x=V=>S(z(V,h,k,N)),F=b.ori==0?Jt:Zt;const T={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Rt},O=T.stroke,E=b.dir*(b.ori==0?1:-1);u=Yt(y,u,g,1),g=Yt(y,u,g,-1);let H=x(y[E==1?u:g]),D=L(d[E==1?u:g]),U=D;F(O,D,H);for(let V=E==1?u:g;V>=u&&V<=g;V+=E){let $=y[V];if($==null)continue;let G=L(d[V]),Ce=x($);l==1?F(O,G,H):F(O,U,Ce),F(O,G,Ce),H=Ce,U=G}let[oe,Q]=Yl(o,a);if(m.fill!=null||oe!=0){let V=T.fill=new Path2D(O),$=m.fillTo(o,a,m.min,m.max,oe),G=x($);F(V,U,G),F(V,D,G)}if(!m.spanGaps){let V=[];V.push(...Bn(d,y,u,g,E,L,n));let $=m.width*te/2,G=s||l==1?$:-$,Ce=s||l==-1?-$:$;V.forEach(De=>{De[0]+=G,De[1]+=Ce}),T.gaps=V=m.gaps(o,a,u,g,V),T.clip=jl(V,b.ori,A,N,j,k)}return Q!=0&&(T.band=Q==2?[at(o,a,u,g,O,-1),at(o,a,u,g,O,1)]:at(o,a,u,g,O,Q)),T})}function mf(e){e=e||wl;const l=le(e.size,[.6,X,1]),s=e.align||0,n=(e.gap||0)*te,o=le(e.radius,0),a=1-l[0],u=le(l[1],X)*te,g=le(l[2],1)*te,m=le(e.disp,wl),d=le(e.each,h=>{}),{fill:y,stroke:b}=m;return(h,R,z,A)=>Ct(h,R,(N,j,k,S,L,x,F,T,O,E,H)=>{let D=N.pxRound;const U=S.dir*(S.ori==0?1:-1),oe=L.dir*(L.ori==1?1:-1);let Q=S.ori==0?Zl:Un,V=S.ori==0?d:(ne,Ne,Ke,K,J,me,_e)=>{d(ne,Ne,Ke,J,K,_e,me)},[$,G]=Yl(h,R),Ce=L.distr==3?$==1?L.max:L.min:0,De=F(Ce,L,H,O),Ve,W,I=D(N.width*te),Te=!1,pe=null,Ze=null,it=null,ht=null;y!=null&&(I==0||b!=null)&&(Te=!0,pe=y.values(h,R,z,A),Ze=new Map,new Set(pe).forEach(ne=>{ne!=null&&Ze.set(ne,new Path2D)}),I>0&&(it=b.values(h,R,z,A),ht=new Map,new Set(it).forEach(ne=>{ne!=null&&ht.set(ne,new Path2D)})));let{x0:pt,size:Qe}=m;if(pt!=null&&Qe!=null){j=pt.values(h,R,z,A),pt.unit==2&&(j=j.map(Ne=>h.posToVal(T+Ne*E,S.key,!0)));let ne=Qe.values(h,R,z,A);Qe.unit==2?W=ne[0]*E:W=x(ne[0],S,E,T)-x(0,S,E,T),W=D(W-I),Ve=U==1?-I/2:W+I/2}else{let ne=E;if(j.length>1){let Ke=null;for(let K=0,J=1/0;K<j.length;K++)if(k[K]!==void 0){if(Ke!=null){let me=Be(j[K]-j[Ke]);me<J&&(J=me,ne=Be(x(j[K],S,E,T)-x(j[Ke],S,E,T)))}Ke=K}}let Ne=ne*a;W=D(Ue(u,Pe(g,ne-Ne))-I-n),Ve=(s==0?W/2:s==U?0:W)-s*U*n/2}const rt={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:Rt|Il};let Qt;G!=0&&(rt.band=new Path2D,Qt=D(F(G==1?L.max:L.min,L,H,O)));const zt=Te?null:new Path2D,Ql=rt.band;let{y0:_l,y1:mt}=m,Xe=null;_l!=null&&mt!=null&&(k=mt.values(h,R,z,A),Xe=_l.values(h,R,z,A));for(let ne=U==1?z:A;ne>=z&&ne<=A;ne+=U){let Ne=k[ne];if(Ne===void 0)continue;let Ke=S.distr!=2||m!=null?j[ne]:ne,K=x(Ke,S,E,T),J=F(le(Ne,Ce),L,H,O);Xe!=null&&Ne!=null&&(De=F(Xe[ne],L,H,O));let me=D(K-Ve),_e=D(Pe(J,De)),ye=D(Ue(J,De)),Oe=_e-ye,tt=o*W;Ne!=null&&(Te?(I>0&&it[ne]!=null&&Q(ht.get(it[ne]),me,ye+qe(I/2),W,Pe(0,Oe-I),tt),pe[ne]!=null&&Q(Ze.get(pe[ne]),me,ye+qe(I/2),W,Pe(0,Oe-I),tt)):Q(zt,me,ye+qe(I/2),W,Pe(0,Oe-I),tt),V(h,R,ne,me-I/2,ye,W+I,Oe)),G!=0&&(oe*G==1?(_e=ye,ye=Qt):(ye=_e,_e=Qt),Oe=_e-ye,Q(Ql,me-I/2,ye,W+I,Pe(0,Oe),0))}return I>0&&(rt.stroke=Te?ht:zt),rt.fill=Te?Ze:zt,rt})}function gf(e,l){const s=le(l==null?void 0:l.alignGaps,0);return(n,o,a,u)=>Ct(n,o,(g,m,d,y,b,h,R,z,A,N,j)=>{let k=g.pxRound,S=G=>k(h(G,y,N,z)),L=G=>k(R(G,b,j,A)),x,F,T;y.ori==0?(x=ql,T=Jt,F=Ps):(x=Jl,T=Zt,F=Rs);const O=y.dir*(y.ori==0?1:-1);a=Yt(d,a,u,1),u=Yt(d,a,u,-1);let E=S(m[O==1?a:u]),H=E,D=[],U=[];for(let G=O==1?a:u;G>=a&&G<=u;G+=O)if(d[G]!=null){let De=m[G],Ve=S(De);D.push(H=Ve),U.push(L(d[G]))}const oe={stroke:e(D,U,x,T,F,k),fill:null,clip:null,band:null,gaps:null,flags:Rt},Q=oe.stroke;let[V,$]=Yl(n,o);if(g.fill!=null||V!=0){let G=oe.fill=new Path2D(Q),Ce=g.fillTo(n,o,g.min,g.max,V),De=L(Ce);T(G,H,De),T(G,E,De)}if(!g.spanGaps){let G=[];G.push(...Bn(m,d,a,u,O,S,s)),oe.gaps=G=g.gaps(n,o,a,u,G),oe.clip=jl(G,y.ori,z,A,N,j)}return $!=0&&(oe.band=$==2?[at(n,o,a,u,Q,-1),at(n,o,a,u,Q,1)]:at(n,o,a,u,Q,$)),oe})}function df(e){return gf(wf,e)}function wf(e,l,s,n,o,a){const u=e.length;if(u<2)return null;const g=new Path2D;if(s(g,e[0],l[0]),u==2)n(g,e[1],l[1]);else{let m=Array(u),d=Array(u-1),y=Array(u-1),b=Array(u-1);for(let h=0;h<u-1;h++)y[h]=l[h+1]-l[h],b[h]=e[h+1]-e[h],d[h]=y[h]/b[h];m[0]=d[0];for(let h=1;h<u-1;h++)d[h]===0||d[h-1]===0||d[h-1]>0!=d[h]>0?m[h]=0:(m[h]=3*(b[h-1]+b[h])/((2*b[h]+b[h-1])/d[h-1]+(b[h]+2*b[h-1])/d[h]),isFinite(m[h])||(m[h]=0));m[u-1]=d[u-2];for(let h=0;h<u-1;h++)o(g,e[h]+b[h]/3,l[h]+m[h]*b[h]/3,e[h+1]-b[h]/3,l[h+1]-m[h+1]*b[h]/3,e[h+1],l[h+1])}return g}const Rn=new Set;function is(){Rn.forEach(e=>{e.syncRect(!0)})}qt&&(Et(Jo,Kt,is),Et(Zo,Kt,is,!0),Et(Ol,Kt,()=>{Re.pxRatio=te}));const Sf=Fs(),_f=Cs();function ss(e,l,s,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((a,u)=>Vs(a,u,l,s))}function yf(e,l){return e.map((s,n)=>n==0?null:we({},l,s))}function Vs(e,l,s,n){return we({},l==0?s:n,e)}function Ns(e,l,s){return l==null?jt:[l,s]}const bf=Ns;function vf(e,l,s){return l==null?jt:Gl(l,s,Vn,!0)}function Hs(e,l,s,n){return l==null?jt:Bl(l,s,e.scales[n].log,!1)}const kf=Hs;function Os(e,l,s,n){return l==null?jt:Fn(l,s,e.scales[n].log,!1)}const Mf=Os;function Df(e,l,s,n,o){let a=Pe(Hi(e),Hi(l)),u=l-e,g=_t(o/n*u,s);do{let m=s[g],d=n*m/u;if(d>=o&&a+(m<5?Ul.get(m):0)<=17)return[m,d]}while(++g<s.length);return[0,0]}function os(e){let l,s;return e=e.replace(/(\d+)px/,(n,o)=>(l=Me((s=+o)*te))+"px"),[e,l,s]}function Tf(e){e.show&&[e.font,e.labelFont].forEach(l=>{let s=re(l[2]*te,1);l[0]=l[0].replace(/[0-9.]+px/,s+"px"),l[1]=s})}function Re(e,l,s){const n={mode:le(e.mode,1)},o=n.mode;function a(t,i){return((i.distr==3?At(t>0?t:i.clamp(n,t,i.min,i.max,i.key)):i.distr==4?kn(t,i.asinh):t)-i._min)/(i._max-i._min)}function u(t,i,r,f){let c=a(t,i);return f+r*(i.dir==-1?1-c:c)}function g(t,i,r,f){let c=a(t,i);return f+r*(i.dir==-1?c:1-c)}function m(t,i,r,f){return i.ori==0?u(t,i,r,f):g(t,i,r,f)}n.valToPosH=u,n.valToPosV=g;let d=!1;n.status=0;const y=n.root=et(Lo);if(e.id!=null&&(y.id=e.id),je(y,e.class),e.title){let t=et(Co,y);t.textContent=e.title}const b=ct("canvas"),h=n.ctx=b.getContext("2d"),R=et(zo,y),z=n.under=et(Fo,R);R.appendChild(b);const A=n.over=et(Vo,R);e=Pt(e);const N=+le(e.pxAlign,1),j=ns(N);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const k=e.ms||.001,S=n.series=o==1?ss(e.series||[],Xi,ts,!1):yf(e.series||[null],of),L=n.axes=ss(e.axes||[],Qi,$i,!0),x=n.scales={},F=n.bands=e.bands||[];F.forEach(t=>{t.fill=ee(t.fill||null),t.dir=le(t.dir,-1)});const T=o==2?S[1].facets[0].scale:S[0].scale,O={axes:lo,series:Qs},E=(e.drawOrder||["axes","series"]).map(t=>O[t]);function H(t){let i=x[t];if(i==null){let r=(e.scales||wl)[t]||wl;if(r.from!=null)H(r.from),x[t]=we({},x[r.from],r,{key:t});else{i=x[t]=we({},t==T?Ts:ff,r),i.key=t;let f=i.time,c=i.range,p=xt(c);if((t!=T||o==2&&!f)&&(p&&(c[0]==null||c[1]==null)&&(c={min:c[0]==null?Vi:{mode:1,hard:c[0],soft:c[0]},max:c[1]==null?Vi:{mode:1,hard:c[1],soft:c[1]}},p=!1),!p&&Kl(c))){let w=c;c=(_,M,C)=>M==null?jt:Gl(M,C,w)}i.range=ee(c||(f?bf:t==T?i.distr==3?kf:i.distr==4?Mf:Ns:i.distr==3?Hs:i.distr==4?Os:vf)),i.auto=ee(p?!1:i.auto),i.clamp=ee(i.clamp||rf),i._min=i._max=null}}}H("x"),H("y"),o==1&&S.forEach(t=>{H(t.scale)}),L.forEach(t=>{H(t.scale)});for(let t in e.scales)H(t);const D=x[T],U=D.distr;let oe,Q;D.ori==0?(je(y,Po),oe=u,Q=g):(je(y,Ro),oe=g,Q=u);const V={};for(let t in x){let i=x[t];(i.min!=null||i.max!=null)&&(V[t]={min:i.min,max:i.max},i.min=i.max=null)}const $=e.tzDate||(t=>new Date(Me(t/k))),G=e.fmtDate||On,Ce=k==1?Lr($):Cr($),De=qi($,ji(k==1?Ar:Rr,G)),Ve=Zi($,Ji(Fr,G)),W=[],I=n.legend=we({},Hr,e.legend),Te=I.show,pe=I.markers;I.idxs=W,pe.width=ee(pe.width),pe.dash=ee(pe.dash),pe.stroke=ee(pe.stroke),pe.fill=ee(pe.fill);let Ze,it=[],ht=[],pt,Qe=!1,rt={};if(I.live){const t=S[1]?S[1].values:null;Qe=t!=null,pt=Qe?t(n,1,0):{_:0};for(let i in pt)rt[i]="--"}if(Te)if(Ze=ct("table",Io,y),Qe){let t=ct("tr",Ko,Ze);ct("th",null,t);for(var Qt in pt)ct("th",ki,t).textContent=Qt}else je(Ze,Uo),I.live&&je(Ze,Bo);const zt={show:!0},Ql={show:!1};function _l(t,i){if(i==0&&(Qe||!I.live||o==2))return jt;let r=[],f=ct("tr",Yo,Ze,Ze.childNodes[i]);je(f,t.class),t.show||je(f,Tt);let c=ct("th",null,f);if(pe.show){let _=et(jo,c);if(i>0){let M=pe.width(n,i);M&&(_.style.border=M+"px "+pe.dash(n,i)+" "+pe.stroke(n,i)),_.style.background=pe.fill(n,i)}}let p=et(ki,c);p.textContent=t.label,i>0&&(pe.show||(p.style.color=t.width>0?pe.stroke(n,i):pe.fill(n,i)),Xe("click",c,_=>{if(B._lock)return;let M=S.indexOf(t);if((_.ctrlKey||_.metaKey)!=I.isolate){let C=S.some((v,P)=>P>0&&P!=M&&v.show);S.forEach((v,P)=>{P>0&&ot(P,C?P==M?zt:Ql:zt,!0,Le.setSeries)})}else ot(M,{show:!t.show},!0,Le.setSeries)}),vl&&Xe(Ei,c,_=>{B._lock||ot(S.indexOf(t),Ht,!0,Le.setSeries)}));for(var w in pt){let _=ct("td",qo,f);_.textContent="--",r.push(_)}return[f,r]}const mt=new Map;function Xe(t,i,r){const f=mt.get(i)||{},c=B.bind[t](n,i,r);c&&(Et(t,i,f[t]=c),mt.set(i,f))}function ne(t,i,r){const f=mt.get(i)||{};for(let c in f)(t==null||c==t)&&(Ln(c,i,f[c]),delete f[c]);t==null&&mt.delete(i)}let Ne=0,Ke=0,K=0,J=0,me=0,_e=0,ye=0,Oe=0,tt=0,bt=0;n.bbox={};let Xl=!1,yl=!1,Ft=!1,Xt=!1,st=!1;function $l(t,i,r){(r||t!=n.width||i!=n.height)&&Kn(t,i),tl(!1),Ft=!0,yl=!0,Xt=st=B.left>=0,kt()}function Kn(t,i){n.width=Ne=K=t,n.height=Ke=J=i,me=_e=0,Bs(),Us();let r=n.bbox;ye=r.left=Dt(me*te,.5),Oe=r.top=Dt(_e*te,.5),tt=r.width=Dt(K*te,.5),bt=r.height=Dt(J*te,.5)}const Gs=3;function Ws(){let t=!1,i=0;for(;!t;){i++;let r=eo(i),f=to(i);t=i==Gs||r&&f,t||(Kn(n.width,n.height),yl=!0)}}function Is({width:t,height:i}){$l(t,i)}n.setSize=Is;function Bs(){let t=!1,i=!1,r=!1,f=!1;L.forEach((c,p)=>{if(c.show&&c._show){let{side:w,_size:_}=c,M=w%2,C=c.label!=null?c.labelSize:0,v=_+C;v>0&&(M?(K-=v,w==3?(me+=v,f=!0):r=!0):(J-=v,w==0?(_e+=v,t=!0):i=!0))}}),vt[0]=t,vt[1]=r,vt[2]=i,vt[3]=f,K-=gt[1]+gt[3],me+=gt[3],J-=gt[2]+gt[0],_e+=gt[0]}function Us(){let t=me+K,i=_e+J,r=me,f=_e;function c(p,w){switch(p){case 1:return t+=w,t-w;case 2:return i+=w,i-w;case 3:return r-=w,r+w;case 0:return f-=w,f+w}}L.forEach((p,w)=>{if(p.show&&p._show){let _=p.side;p._pos=c(_,p._size),p.label!=null&&(p._lpos=c(_,p.labelSize))}})}const B=n.cursor=we({},Kr,{drag:{y:o==2}},e.cursor);{B.idxs=W,B._lock=!1;let t=B.points;t.show=ee(t.show),t.size=ee(t.size),t.stroke=ee(t.stroke),t.width=ee(t.width),t.fill=ee(t.fill)}const bl=n.focus=we({},e.focus||{alpha:.3},B.focus),vl=bl.prox>=0;let Ge=[null];function Ks(t,i){if(i>0){let r=B.points.show(n,i);if(r)return je(r,Wo),je(r,t.class),Bt(r,-10,-10,K,J),A.insertBefore(r,Ge[i]),r}}function Yn(t,i){if(o==1||i>0){let r=o==1&&x[t.scale].time,f=t.value;t.value=r?Ii(f)?Zi($,Ji(f,G)):f||Ve:f||nf,t.label=t.label||(r?qr:jr)}if(i>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Sf||fr,t.fillTo=ee(t.fillTo||uf),t.pxAlign=+le(t.pxAlign,N),t.pxRound=ns(t.pxAlign),t.stroke=ee(t.stroke||null),t.fill=ee(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Ds(t.width,1),f=t.points=we({},{size:r,width:Pe(1,r*.2),stroke:t.stroke,space:r*2,paths:_f,_stroke:null,_fill:null},t.points);f.show=ee(f.show),f.filter=ee(f.filter),f.fill=ee(f.fill),f.stroke=ee(f.stroke),f.paths=ee(f.paths),f.pxAlign=t.pxAlign}if(Te){let r=_l(t,i);it.splice(i,0,r[0]),ht.splice(i,0,r[1]),I.values.push(null)}if(B.show){W.splice(i,0,null);let r=Ks(t,i);r&&Ge.splice(i,0,r)}Ae("addSeries",i)}function Ys(t,i){i=i==null?S.length:i,t=Vs(t,i,Xi,ts),S.splice(i,0,t),Yn(S[i],i)}n.addSeries=Ys;function js(t){if(S.splice(t,1),Te){I.values.splice(t,1),ht.splice(t,1);let i=it.splice(t,1)[0];ne(null,i.firstChild),i.remove()}B.show&&(W.splice(t,1),Ge.length>1&&Ge.splice(t,1)[0].remove()),Ae("delSeries",t)}n.delSeries=js;const vt=[!1,!1,!1,!1];function qs(t,i){if(t._show=t.show,t.show){let r=t.side%2,f=x[t.scale];f==null&&(t.scale=r?S[1].scale:T,f=x[t.scale]);let c=f.time;t.size=ee(t.size),t.space=ee(t.space),t.rotate=ee(t.rotate),t.incrs=ee(t.incrs||(f.distr==2?Dr:c?k==1?Er:Pr:Tr)),t.splits=ee(t.splits||(c&&f.distr==1?Ce:f.distr==3?Pn:f.distr==4?Qr:Zr)),t.stroke=ee(t.stroke),t.grid.stroke=ee(t.grid.stroke),t.ticks.stroke=ee(t.ticks.stroke),t.border.stroke=ee(t.border.stroke);let p=t.values;t.values=xt(p)&&!xt(p[0])?ee(p):c?xt(p)?qi($,ji(p,G)):Ii(p)?zr($,p):p||De:p||Jr,t.filter=ee(t.filter||(f.distr>=3?lf:us)),t.font=os(t.font),t.labelFont=os(t.labelFont),t._size=t.size(n,null,i,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(vt[i]=!0,t._el=et(No,R))}}function $t(t,i,r,f){let[c,p,w,_]=r,M=i%2,C=0;return M==0&&(_||p)&&(C=i==0&&!c||i==2&&!w?Me(Qi.size/3):0),M==1&&(c||w)&&(C=i==1&&!p||i==3&&!_?Me($i.size/2):0),C}const jn=n.padding=(e.padding||[$t,$t,$t,$t]).map(t=>ee(le(t,$t))),gt=n._padding=jn.map((t,i)=>t(n,i,vt,0));let be,xe=null,Ee=null;const kl=o==1?S[0].idxs:null;let lt=null,Ml=!1;function qn(t,i){if(l=t==null?[]:Pt(t,Bi),o==2){be=0;for(let r=1;r<S.length;r++)be+=l[r][0].length;n.data=l=t}else if(l[0]==null&&(l[0]=[]),n.data=l.slice(),lt=l[0],be=lt.length,U==2){l[0]=Array(be);for(let r=0;r<be;r++)l[0][r]=r}if(n._data=l,tl(!0),Ae("setData"),U==2&&(Ft=!0),i!==!1){let r=D;r.auto(n,Ml)?en():Nt(T,r.min,r.max),Xt=B.left>=0,st=!0,kt()}}n.setData=qn;function en(){Ml=!0;let t,i;o==1&&(be>0?(xe=kl[0]=0,Ee=kl[1]=be-1,t=l[0][xe],i=l[0][Ee],U==2?(t=xe,i=Ee):be==1&&(U==3?[t,i]=Bl(t,t,D.log,!1):U==4?[t,i]=Fn(t,t,D.log,!1):D.time?i=t+Me(86400/k):[t,i]=Gl(t,i,Vn,!0))):(xe=kl[0]=t=null,Ee=kl[1]=i=null)),Nt(T,t,i)}let Dl,Vt,tn,ln,nn,sn,on,rn,fn,el;function Jn(t=Di,i,r=as,f="butt",c=Di,p="round"){t!=Dl&&(h.strokeStyle=Dl=t),c!=Vt&&(h.fillStyle=Vt=c),i!=tn&&(h.lineWidth=tn=i),p!=nn&&(h.lineJoin=nn=p),f!=sn&&(h.lineCap=sn=f),r!=ln&&h.setLineDash(ln=r)}function Zn(t,i,r,f){i!=Vt&&(h.fillStyle=Vt=i),t!=on&&(h.font=on=t),r!=rn&&(h.textAlign=rn=r),f!=fn&&(h.textBaseline=fn=f)}function un(t,i,r,f,c=0){if(f.length>0&&t.auto(n,Ml)&&(i==null||i.min==null)){let p=le(xe,0),w=le(Ee,f.length-1),_=r.min==null?t.distr==3?tr(f,p,w):er(f,p,w,c):[r.min,r.max];t.min=Ue(t.min,r.min=_[0]),t.max=Pe(t.max,r.max=_[1])}}function Js(){let t=Pt(x,Bi);for(let f in t){let c=t[f],p=V[f];if(p!=null&&p.min!=null)we(c,p),f==T&&tl(!0);else if(f!=T||o==2)if(be==0&&c.from==null){let w=c.range(n,null,null,f);c.min=w[0],c.max=w[1]}else c.min=X,c.max=-X}if(be>0){S.forEach((f,c)=>{if(o==1){let p=f.scale,w=t[p],_=V[p];if(c==0){let M=w.range(n,w.min,w.max,p);w.min=M[0],w.max=M[1],xe=_t(w.min,l[0]),Ee=_t(w.max,l[0]),l[0][xe]<w.min&&xe++,l[0][Ee]>w.max&&Ee--,f.min=lt[xe],f.max=lt[Ee]}else f.show&&f.auto&&un(w,_,f,l[c],f.sorted);f.idxs[0]=xe,f.idxs[1]=Ee}else if(c>0&&f.show&&f.auto){let[p,w]=f.facets,_=p.scale,M=w.scale,[C,v]=l[c];un(t[_],V[_],p,C,p.sorted),un(t[M],V[M],w,v,w.sorted),f.min=w.min,f.max=w.max}});for(let f in t){let c=t[f],p=V[f];if(c.from==null&&(p==null||p.min==null)){let w=c.range(n,c.min==X?null:c.min,c.max==-X?null:c.max,f);c.min=w[0],c.max=w[1]}}}for(let f in t){let c=t[f];if(c.from!=null){let p=t[c.from];if(p.min==null)c.min=c.max=null;else{let w=c.range(n,p.min,p.max,f);c.min=w[0],c.max=w[1]}}}let i={},r=!1;for(let f in t){let c=t[f],p=x[f];if(p.min!=c.min||p.max!=c.max){p.min=c.min,p.max=c.max;let w=p.distr;p._min=w==3?At(p.min):w==4?kn(p.min,p.asinh):p.min,p._max=w==3?At(p.max):w==4?kn(p.max,p.asinh):p.max,i[f]=r=!0}}if(r){S.forEach((f,c)=>{o==2?c>0&&i.y&&(f._paths=null):i[f.scale]&&(f._paths=null)});for(let f in i)Ft=!0,Ae("setScale",f);B.show&&(Xt=st=B.left>=0)}for(let f in V)V[f]=null}function Zs(t){let i=Oi(xe-1,0,be-1),r=Oi(Ee+1,0,be-1);for(;t[i]==null&&i>0;)i--;for(;t[r]==null&&r<be-1;)r++;return[i,r]}function Qs(){be>0&&(S.forEach((t,i)=>{if(i>0&&t.show&&t._paths==null){let r=Zs(l[i]);t._paths=t.paths(n,i,r[0],r[1])}}),S.forEach((t,i)=>{if(i>0&&t.show){el!=t.alpha&&(h.globalAlpha=el=t.alpha),Qn(i,!1),t._paths&&Xn(i,!1);{Qn(i,!0);let r=t.points.show(n,i,xe,Ee),f=t.points.filter(n,i,r,t._paths?t._paths.gaps:null);(r||f)&&(t.points._paths=t.points.paths(n,i,xe,Ee,f),Xn(i,!0))}el!=1&&(h.globalAlpha=el=1),Ae("drawSeries",i)}}))}function Qn(t,i){let r=i?S[t].points:S[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function Xn(t,i){let r=i?S[t].points:S[t],f=r._stroke,c=r._fill,{stroke:p,fill:w,clip:_,flags:M}=r._paths,C=null,v=re(r.width*te,3),P=v%2/2;i&&c==null&&(c=v>0?"#fff":f);let Y=r.pxAlign==1;if(Y&&h.translate(P,P),!i){let ge=ye,q=Oe,fe=tt,Z=bt,ie=v*te/2;r.min==0&&(Z+=ie),r.max==0&&(q-=ie,Z+=ie),C=new Path2D,C.rect(ge,q,fe,Z)}i?cn(f,v,r.dash,r.cap,c,p,w,M,_):Xs(t,f,v,r.dash,r.cap,c,p,w,M,C,_),Y&&h.translate(-P,-P)}function Xs(t,i,r,f,c,p,w,_,M,C,v){let P=!1;F.forEach((Y,ge)=>{if(Y.series[0]==t){let q=S[Y.series[1]],fe=l[Y.series[1]],Z=(q._paths||wl).band;xt(Z)&&(Z=Y.dir==1?Z[0]:Z[1]);let ie,de=null;q.show&&Z&&nr(fe,xe,Ee)?(de=Y.fill(n,ge)||p,ie=q._paths.clip):Z=null,cn(i,r,f,c,de,w,_,M,C,v,ie,Z),P=!0}}),P||cn(i,r,f,c,p,w,_,M,C,v)}const $n=Rt|Il;function cn(t,i,r,f,c,p,w,_,M,C,v,P){Jn(t,i,r,f,c),(M||C||P)&&(h.save(),M&&h.clip(M),C&&h.clip(C)),P?(_&$n)==$n?(h.clip(P),v&&h.clip(v),xl(c,w),Tl(t,p,i)):_&Il?(xl(c,w),h.clip(P),Tl(t,p,i)):_&Rt&&(h.save(),h.clip(P),v&&h.clip(v),xl(c,w),h.restore(),Tl(t,p,i)):(xl(c,w),Tl(t,p,i)),(M||C||P)&&h.restore()}function Tl(t,i,r){r>0&&(i instanceof Map?i.forEach((f,c)=>{h.strokeStyle=Dl=c,h.stroke(f)}):i!=null&&t&&h.stroke(i))}function xl(t,i){i instanceof Map?i.forEach((r,f)=>{h.fillStyle=Vt=f,h.fill(r)}):i!=null&&t&&h.fill(i)}function $s(t,i,r,f){let c=L[t],p;if(f<=0)p=[0,0];else{let w=c._space=c.space(n,t,i,r,f),_=c._incrs=c.incrs(n,t,i,r,f,w);p=Df(i,r,_,f,w)}return c._found=p}function an(t,i,r,f,c,p,w,_,M,C){let v=w%2/2;N==1&&h.translate(v,v),Jn(_,w,M,C,_),h.beginPath();let P,Y,ge,q,fe=c+(f==0||f==3?-p:p);r==0?(Y=c,q=fe):(P=c,ge=fe);for(let Z=0;Z<t.length;Z++)i[Z]!=null&&(r==0?P=ge=t[Z]:Y=q=t[Z],h.moveTo(P,Y),h.lineTo(ge,q));h.stroke(),N==1&&h.translate(-v,-v)}function eo(t){let i=!0;return L.forEach((r,f)=>{if(!r.show)return;let c=x[r.scale];if(c.min==null){r._show&&(i=!1,r._show=!1,tl(!1));return}else r._show||(i=!1,r._show=!0,tl(!1));let p=r.side,w=p%2,{min:_,max:M}=c,[C,v]=$s(f,_,M,w==0?K:J);if(v==0)return;let P=c.distr==2,Y=r._splits=r.splits(n,f,_,M,C,v,P),ge=c.distr==2?Y.map(ie=>lt[ie]):Y,q=c.distr==2?lt[Y[1]]-lt[Y[0]]:C,fe=r._values=r.values(n,r.filter(n,ge,f,v,q),f,v,q);r._rotate=p==2?r.rotate(n,fe,f,v):0;let Z=r._size;r._size=Hn(r.size(n,fe,f,t)),Z!=null&&r._size!=Z&&(i=!1)}),i}function to(t){let i=!0;return jn.forEach((r,f)=>{let c=r(n,f,vt,t);c!=gt[f]&&(i=!1),gt[f]=c}),i}function lo(){for(let t=0;t<L.length;t++){let i=L[t];if(!i.show||!i._show)continue;let r=i.side,f=r%2,c,p,w=i.stroke(n,t),_=r==0||r==3?-1:1;if(i.label){let nt=i.labelGap*_,ut=Me((i._lpos+nt)*te);Zn(i.labelFont[0],w,"center",r==2?al:Mi),h.save(),f==1?(c=p=0,h.translate(ut,Me(Oe+bt/2)),h.rotate((r==3?-Hl:Hl)/2)):(c=Me(ye+tt/2),p=ut),h.fillText(i.label,c,p),h.restore()}let[M,C]=i._found;if(C==0)continue;let v=x[i.scale],P=f==0?tt:bt,Y=f==0?ye:Oe,ge=Me(i.gap*te),q=i._splits,fe=v.distr==2?q.map(nt=>lt[nt]):q,Z=v.distr==2?lt[q[1]]-lt[q[0]]:M,ie=i.ticks,de=i.border,We=ie.show?Me(ie.size*te):0,ue=i._rotate*-Hl/180,Fe=j(i._pos*te),Ie=(We+ge)*_,He=Fe+Ie;p=f==0?He:0,c=f==1?He:0;let Ye=i.font[0],wt=i.align==1?It:i.align==2?yn:ue>0?It:ue<0?yn:f==0?"center":r==3?yn:It,St=ue||f==1?"middle":r==2?al:Mi;Zn(Ye,w,wt,St);let mi=i.font[1]*Yr,zl=q.map(nt=>j(m(nt,v,P,Y))),gi=i._values;for(let nt=0;nt<gi.length;nt++){let ut=gi[nt];if(ut!=null){f==0?c=zl[nt]:p=zl[nt],ut=""+ut;let di=ut.indexOf(`
`)==-1?[ut]:ut.split(/\n/gm);for(let cl=0;cl<di.length;cl++){let wi=di[cl];ue?(h.save(),h.translate(c,p+cl*mi),h.rotate(ue),h.fillText(wi,0,0),h.restore()):h.fillText(wi,c,p+cl*mi)}}}ie.show&&an(zl,ie.filter(n,fe,t,C,Z),f,r,Fe,We,re(ie.width*te,3),ie.stroke(n,t),ie.dash,ie.cap);let Wt=i.grid;Wt.show&&an(zl,Wt.filter(n,fe,t,C,Z),f,f==0?2:1,f==0?Oe:ye,f==0?bt:tt,re(Wt.width*te,3),Wt.stroke(n,t),Wt.dash,Wt.cap),de.show&&an([Fe],[1],f==0?1:0,f==0?1:2,f==1?Oe:ye,f==1?bt:tt,re(de.width*te,3),de.stroke(n,t),de.dash,de.cap)}Ae("drawAxes")}function tl(t){S.forEach((i,r)=>{r>0&&(i._paths=null,t&&(o==1?(i.min=null,i.max=null):i.facets.forEach(f=>{f.min=null,f.max=null})))})}let hn=!1;function kt(){hn||(dr(no),hn=!0)}function no(){Xl&&(Js(),Xl=!1),Ft&&(Ws(),Ft=!1),yl&&(ce(z,It,me),ce(z,al,_e),ce(z,pl,K),ce(z,ml,J),ce(A,It,me),ce(A,al,_e),ce(A,pl,K),ce(A,ml,J),ce(R,pl,Ne),ce(R,ml,Ke),b.width=Me(Ne*te),b.height=Me(Ke*te),L.forEach(({_el:t,_show:i,_size:r,_pos:f,side:c})=>{if(t!=null)if(i){let p=c===3||c===0?r:0,w=c%2==1;ce(t,w?"left":"top",f-p),ce(t,w?"width":"height",r),ce(t,w?"top":"left",w?_e:me),ce(t,w?"height":"width",w?J:K),An(t,Tt)}else je(t,Tt)}),Dl=Vt=tn=nn=sn=on=rn=fn=ln=null,el=1,Rl(!0),Ae("setSize"),yl=!1),Ne>0&&Ke>0&&(h.clearRect(0,0,b.width,b.height),Ae("drawClear"),E.forEach(t=>t()),Ae("draw")),B.show&&Xt&&(dt(null,!0,!1),Xt=!1),d||(d=!0,n.status=1,Ae("ready")),Ml=!1,hn=!1}n.redraw=(t,i)=>{Ft=i||!1,t!==!1?Nt(T,D.min,D.max):kt()};function pn(t,i){let r=x[t];if(r.from==null){if(be==0){let f=r.range(n,i.min,i.max,t);i.min=f[0],i.max=f[1]}if(i.min>i.max){let f=i.min;i.min=i.max,i.max=f}if(be>1&&i.min!=null&&i.max!=null&&i.max-i.min<1e-16)return;t==T&&r.distr==2&&be>0&&(i.min=_t(i.min,l[0]),i.max=_t(i.max,l[0]),i.min==i.max&&i.max++),V[t]=i,Xl=!0,kt()}}n.setScale=pn;let mn,gn,El,Al,ei,ti,ll,nl,li,ni,ae,he,Mt=!1;const ze=B.drag;let ve=ze.x,ke=ze.y;B.show&&(B.x&&(mn=et(Oo,A)),B.y&&(gn=et(Go,A)),D.ori==0?(El=mn,Al=gn):(El=gn,Al=mn),ae=B.left,he=B.top);const $e=n.select=we({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),il=$e.show?et(Ho,$e.over?A:z):null;function Ll(t,i){if($e.show){for(let r in t)ce(il,r,$e[r]=t[r]);i!==!1&&Ae("setSelect")}}n.setSelect=Ll;function io(t,i){let r=S[t],f=Te?it[t]:null;r.show?f&&An(f,Tt):(f&&je(f,Tt),Ge.length>1&&Bt(Ge[t],-10,-10,K,J))}function Nt(t,i,r){pn(t,{min:i,max:r})}function ot(t,i,r,f){i.focus!=null&&uo(t),i.show!=null&&S.forEach((c,p)=>{p>0&&(t==p||t==null)&&(c.show=i.show,io(p,i.show),Nt(o==2?c.facets[1].scale:c.scale,null,null),kt())}),r!==!1&&Ae("setSeries",t,i),f&&ul("setSeries",n,t,i)}n.setSeries=ot;function so(t,i){we(F[t],i)}function oo(t,i){t.fill=ee(t.fill||null),t.dir=le(t.dir,-1),i=i==null?F.length:i,F.splice(i,0,t)}function ro(t){t==null?F.length=0:F.splice(t,1)}n.addBand=oo,n.setBand=so,n.delBand=ro;function fo(t,i){S[t].alpha=i,B.show&&Ge[t]&&(Ge[t].style.opacity=i),Te&&it[t]&&(it[t].style.opacity=i)}let sl,Pl,ol;const Ht={focus:!0};function uo(t){if(t!=ol){let i=t==null,r=bl.alpha!=1;S.forEach((f,c)=>{let p=i||c==0||c==t;f._focus=i?null:p,r&&fo(c,p?1:bl.alpha)}),ol=t,r&&kt()}}Te&&vl&&Et(Ai,Ze,t=>{B._lock||ol!=null&&ot(null,Ht,!0,Le.setSeries)});function ft(t,i,r){let f=x[i];r&&(t=t/te-(f.ori==1?_e:me));let c=K;f.ori==1&&(c=J,t=c-t),f.dir==-1&&(t=c-t);let p=f._min,w=f._max,_=t/c,M=p+(w-p)*_,C=f.distr;return C==3?yt(10,M):C==4?or(M,f.asinh):M}function co(t,i){let r=ft(t,T,i);return _t(r,l[0],xe,Ee)}n.valToIdx=t=>_t(t,l[0]),n.posToIdx=co,n.posToVal=ft,n.valToPos=(t,i,r)=>x[i].ori==0?u(t,x[i],r?tt:K,r?ye:0):g(t,x[i],r?bt:J,r?Oe:0);function ao(t){t(n),kt()}n.batch=ao,n.setCursor=(t,i,r)=>{ae=t.left,he=t.top,dt(null,i,r)};function ii(t,i){ce(il,It,$e.left=t),ce(il,pl,$e.width=i)}function si(t,i){ce(il,al,$e.top=t),ce(il,ml,$e.height=i)}let rl=D.ori==0?ii:si,fl=D.ori==1?ii:si;function ho(){if(Te&&I.live)for(let t=o==2?1:0;t<S.length;t++){if(t==0&&Qe)continue;let i=I.values[t],r=0;for(let f in i)ht[t][r++].firstChild.nodeValue=i[f]}}function oi(t,i){if(t!=null){let r=t.idx;I.idx=r,S.forEach((f,c)=>{(c>0||!Qe)&&ri(c,r)})}Te&&I.live&&ho(),st=!1,i!==!1&&Ae("setLegend")}n.setLegend=oi;function ri(t,i){let r;if(i==null)r=rt;else{let f=S[t],c=t==0&&U==2?lt:l[t];r=Qe?f.values(n,t,i):{_:f.value(n,c[i],t,i)}}I.values[t]=r}function dt(t,i,r){li=ae,ni=he,[ae,he]=B.move(n,ae,he),B.show&&(El&&Bt(El,Me(ae),0,K,J),Al&&Bt(Al,0,Me(he),K,J));let f,c=xe>Ee;sl=X;let p=D.ori==0?K:J,w=D.ori==1?K:J;if(ae<0||be==0||c){f=null;for(let _=0;_<S.length;_++)_>0&&Ge.length>1&&Bt(Ge[_],-10,-10,K,J);if(vl&&ot(null,Ht,!0,t==null&&Le.setSeries),I.live){W.fill(null),st=!0;for(let _=0;_<S.length;_++)I.values[_]=rt}}else{let _,M,C;o==1&&(_=D.ori==0?ae:he,M=ft(_,T),f=_t(M,l[0],xe,Ee),C=Lt(oe(l[0][f],D,p,0),.5));for(let v=o==2?1:0;v<S.length;v++){let P=S[v],Y=W[v],ge=o==1?l[v][Y]:l[v][1][Y],q=B.dataIdx(n,v,f,M),fe=o==1?l[v][q]:l[v][1][q];st=st||fe!=ge||q!=Y,W[v]=q;let Z=q==f?C:Lt(oe(o==1?l[0][q]:l[v][0][q],D,p,0),.5);if(v>0&&P.show){let ie=fe==null?-10:Lt(Q(fe,o==1?x[P.scale]:x[P.facets[1].scale],w,0),.5);if(ie>0&&o==1){let ue=Be(ie-he);ue<=sl&&(sl=ue,Pl=v)}let de,We;if(D.ori==0?(de=Z,We=ie):(de=ie,We=Z),st&&Ge.length>1){Xo(Ge[v],B.points.fill(n,v),B.points.stroke(n,v));let ue,Fe,Ie,He,Ye=!0,wt=B.points.bbox;if(wt!=null){Ye=!1;let St=wt(n,v);Ie=St.left,He=St.top,ue=St.width,Fe=St.height}else Ie=de,He=We,ue=Fe=B.points.size(n,v);$o(Ge[v],ue,Fe,Ye),Bt(Ge[v],Ie,He,K,J)}}if(I.live){if(!st||v==0&&Qe)continue;ri(v,q)}}}if(B.idx=f,B.left=ae,B.top=he,st&&(I.idx=f,oi()),$e.show&&Mt)if(t!=null){let[_,M]=Le.scales,[C,v]=Le.match,[P,Y]=t.cursor.sync.scales,ge=t.cursor.drag;if(ve=ge._x,ke=ge._y,ve||ke){let{left:q,top:fe,width:Z,height:ie}=t.select,de=t.scales[_].ori,We=t.posToVal,ue,Fe,Ie,He,Ye,wt=_!=null&&C(_,P),St=M!=null&&v(M,Y);wt&&ve?(de==0?(ue=q,Fe=Z):(ue=fe,Fe=ie),Ie=x[_],He=oe(We(ue,P),Ie,p,0),Ye=oe(We(ue+Fe,P),Ie,p,0),rl(Ue(He,Ye),Be(Ye-He))):rl(0,p),St&&ke?(de==1?(ue=q,Fe=Z):(ue=fe,Fe=ie),Ie=x[M],He=Q(We(ue,Y),Ie,w,0),Ye=Q(We(ue+Fe,Y),Ie,w,0),fl(Ue(He,Ye),Be(Ye-He))):fl(0,w)}else wn()}else{let _=Be(li-ei),M=Be(ni-ti);if(D.ori==1){let Y=_;_=M,M=Y}ve=ze.x&&_>=ze.dist,ke=ze.y&&M>=ze.dist;let C=ze.uni;C!=null?ve&&ke&&(ve=_>=C,ke=M>=C,!ve&&!ke&&(M>_?ke=!0:ve=!0)):ze.x&&ze.y&&(ve||ke)&&(ve=ke=!0);let v,P;ve&&(D.ori==0?(v=ll,P=ae):(v=nl,P=he),rl(Ue(v,P),Be(P-v)),ke||fl(0,w)),ke&&(D.ori==1?(v=ll,P=ae):(v=nl,P=he),fl(Ue(v,P),Be(P-v)),ve||rl(0,p)),!ve&&!ke&&(rl(0,0),fl(0,0))}if(ze._x=ve,ze._y=ke,t==null){if(r){if(pi!=null){let[_,M]=Le.scales;Le.values[0]=_!=null?ft(D.ori==0?ae:he,_):null,Le.values[1]=M!=null?ft(D.ori==1?ae:he,M):null}ul(Ti,n,ae,he,K,J,f)}if(vl){let _=r&&Le.setSeries,M=bl.prox;ol==null?sl<=M&&ot(Pl,Ht,!0,_):sl>M?ot(null,Ht,!0,_):Pl!=ol&&ot(Pl,Ht,!0,_)}}d&&i!==!1&&Ae("setCursor")}let Ot=null;function Rl(t){t===!0?Ot=null:(Ot=A.getBoundingClientRect(),Ae("syncRect",Ot))}function fi(t,i,r,f,c,p,w){B._lock||(dn(t,i,r,f,c,p,w,!1,t!=null),t!=null?dt(null,!0,!0):dt(i,!0,!1))}function dn(t,i,r,f,c,p,w,_,M){if(Ot==null&&Rl(!1),t!=null)r=t.clientX-Ot.left,f=t.clientY-Ot.top;else{if(r<0||f<0){ae=-10,he=-10;return}let[C,v]=Le.scales,P=i.cursor.sync,[Y,ge]=P.values,[q,fe]=P.scales,[Z,ie]=Le.match,de=i.axes[0].side%2==1,We=D.ori==0?K:J,ue=D.ori==1?K:J,Fe=de?p:c,Ie=de?c:p,He=de?f:r,Ye=de?r:f;if(q!=null?r=Z(C,q)?m(Y,x[C],We,0):-10:r=We*(He/Fe),fe!=null?f=ie(v,fe)?m(ge,x[v],ue,0):-10:f=ue*(Ye/Ie),D.ori==1){let wt=r;r=f,f=wt}}M&&((r<=1||r>=K-1)&&(r=Dt(r,K)),(f<=1||f>=J-1)&&(f=Dt(f,J))),_?(ei=r,ti=f,[ll,nl]=B.move(n,r,f)):(ae=r,he=f)}const po={width:0,height:0};function wn(){Ll(po,!1)}function ui(t,i,r,f,c,p,w){Mt=!0,ve=ke=ze._x=ze._y=!1,dn(t,i,r,f,c,p,w,!0,!1),t!=null&&(Xe(bn,xn,ci),ul(xi,n,ll,nl,K,J,null))}function ci(t,i,r,f,c,p,w){Mt=ze._x=ze._y=!1,dn(t,i,r,f,c,p,w,!1,!0);let{left:_,top:M,width:C,height:v}=$e,P=C>0||v>0;if(P&&Ll($e),ze.setScale&&P){let Y=_,ge=C,q=M,fe=v;if(D.ori==1&&(Y=M,ge=v,q=_,fe=C),ve&&Nt(T,ft(Y,T),ft(Y+ge,T)),ke)for(let Z in x){let ie=x[Z];Z!=T&&ie.from==null&&ie.min!=X&&Nt(Z,ft(q+fe,Z),ft(q,Z))}wn()}else B.lock&&(B._lock=!B._lock,B._lock||dt(null,!0,!1));t!=null&&(ne(bn,xn),ul(bn,n,ae,he,K,J,null))}function mo(t,i,r,f,c,p,w){if(!B._lock){let _=Mt;if(Mt){let M=!0,C=!0,v=10,P,Y;D.ori==0?(P=ve,Y=ke):(P=ke,Y=ve),P&&Y&&(M=ae<=v||ae>=K-v,C=he<=v||he>=J-v),P&&M&&(ae=ae<ll?0:K),Y&&C&&(he=he<nl?0:J),dt(null,!0,!0),Mt=!1}ae=-10,he=-10,dt(null,!0,!0),_&&(Mt=_)}}function ai(t,i,r,f,c,p,w){en(),wn(),t!=null&&ul(Li,n,ae,he,K,J,null)}function hi(){L.forEach(Tf),$l(n.width,n.height,!0)}Et(Ol,Kt,hi);const Gt={};Gt.mousedown=ui,Gt.mousemove=fi,Gt.mouseup=ci,Gt.dblclick=ai,Gt.setSeries=(t,i,r,f)=>{ot(r,f,!0,!1)},B.show&&(Xe(xi,A,ui),Xe(Ti,A,fi),Xe(Ei,A,Rl),Xe(Ai,A,mo),Xe(Li,A,ai),Rn.add(n),n.syncRect=Rl);const Cl=n.hooks=e.hooks||{};function Ae(t,i,r){t in Cl&&Cl[t].forEach(f=>{f.call(null,n,i,r)})}(e.plugins||[]).forEach(t=>{for(let i in t.hooks)Cl[i]=(Cl[i]||[]).concat(t.hooks[i])});const Le=we({key:null,setSeries:!1,filters:{pub:Gi,sub:Gi},scales:[T,S[1]?S[1].scale:null],match:[Wi,Wi],values:[null,null]},B.sync);B.sync=Le;const pi=Le.key,Sn=xs(pi);function ul(t,i,r,f,c,p,w){Le.filters.pub(t,i,r,f,c,p,w)&&Sn.pub(t,i,r,f,c,p,w)}Sn.sub(n);function go(t,i,r,f,c,p,w){Le.filters.sub(t,i,r,f,c,p,w)&&Gt[t](null,i,r,f,c,p,w)}n.pub=go;function wo(){Sn.unsub(n),Rn.delete(n),mt.clear(),Ln(Ol,Kt,hi),y.remove(),Ae("destroy")}n.destroy=wo;function _n(){Ae("init",e,l),qn(l||e.data,!1),V[T]?pn(T,V[T]):en(),$l(e.width,e.height),dt(null,!0,!1),Ll($e,!1)}return S.forEach(Yn),L.forEach(qs),s?s instanceof HTMLElement?(s.appendChild(y),_n()):s(n,_n):_n(),n}Re.assign=we;Re.fmtNum=Nn;Re.rangeNum=Gl;Re.rangeLog=Bl;Re.rangeAsinh=Fn;Re.orient=Ct;Re.pxRatio=te;Re.join=gr;Re.fmtDate=On,Re.tzDate=kr;Re.sync=xs;{Re.addGap=cf,Re.clipGaps=jl;let e=Re.paths={points:Cs};e.linear=Fs,e.stepped=pf,e.bars=mf,e.spline=df}function xf(e){let l;return{c(){l=bo("div"),this.h()},l(s){l=vo(s,"DIV",{id:!0,style:!0,class:!0}),ko(l).forEach(Si),this.h()},h(){_i(l,"id","container"),yi(l,"height",e[0]),_i(l,"class","svelte-1tcqiwl"),bi(l,"loading",e[2])},m(s,n){Mo(s,l,n),e[13](l)},p(s,[n]){n&1&&yi(l,"height",s[0]),n&4&&bi(l,"loading",s[2])},i:vi,o:vi,d(s){s&&Si(l),e[13](null)}}}function Ef(e,l,s){let n,{fetchData:o}=l,{initStart:a=null}=l,{initEnd:u=null}=l,{title:g=""}=l,{unit:m=""}=l,{label:d="Value"}=l,{height:y="20rem"}=l,{stroke:b="black"}=l,{fill:h="rgba(0, 0, 0, 0.1)"}=l,{stepped:R=!1}=l,z;const A=k=>[k.map(S=>S.date.getTime()/1e3),k.map(S=>isNaN(S.value)?0:S.value)];let N=Eo(!1);Do(e,N,k=>s(2,n=k)),To(async()=>{if(typeof window<"u"){let L=function(){let{width:E,height:H}=z.getBoundingClientRect();return{width:E,height:H}};const k=await o(a,u);let S=A(k),x=L(),F=Math.ceil(Math.log10(k.map(E=>E.value).reduce((E,H)=>Math.max(E,H),0))),T={mode:null,title:g,id:"chart1",class:"my-chart",width:x.width,height:x.height,data:null,tzDate:null,fmtDate:null,padding:[0,0,0,Math.max((F-4)*8,0)],series:[{},{show:!0,spanGaps:!1,label:d,value:(E,H)=>H.toFixed(4)+(m&&" "+m),stroke:b,width:1,fill:h,dash:[10,0],paths:R?Re.paths.stepped({align:1,alignGaps:0}):null}],cursor:{drag:{setScale:!1,x:!0,y:!1}},hooks:{init:[E=>{E.over.ondblclick=H=>{console.log("Fetching data for full range"),E.setData(S)}}],setScale:[E=>{console.log("setScale",E)}],setSelect:[async E=>{let H=E.posToVal(E.select.left,"x"),D=E.posToVal(E.select.left+E.select.width,"x");N.set(!0);try{console.log(E.select),console.log("Fetching data for range...",{min:H,max:D});let U=await o(new Date(H*1e3),new Date(D*1e3));E.setData(A(U),!0),console.log("Fetched")}finally{N.set(!1),E.setSelect({width:0,height:0},!1)}}]}},O=new Re(T,S,z);window.addEventListener("resize",E=>{O.setSize(L())})}});function j(k){xo[k?"unshift":"push"](()=>{z=k,s(1,z)})}return e.$$set=k=>{"fetchData"in k&&s(4,o=k.fetchData),"initStart"in k&&s(5,a=k.initStart),"initEnd"in k&&s(6,u=k.initEnd),"title"in k&&s(7,g=k.title),"unit"in k&&s(8,m=k.unit),"label"in k&&s(9,d=k.label),"height"in k&&s(0,y=k.height),"stroke"in k&&s(10,b=k.stroke),"fill"in k&&s(11,h=k.fill),"stepped"in k&&s(12,R=k.stepped)},[y,z,n,N,o,a,u,g,m,d,b,h,R,j]}class Rf extends So{constructor(l){super(),_o(this,l,Ef,xf,yo,{fetchData:4,initStart:5,initEnd:6,title:7,unit:8,label:9,height:0,stroke:10,fill:11,stepped:12})}}export{Rf as G};
